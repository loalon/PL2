BR /2
ORG 2

BR /L_2
L_L_GLOBAL:


BR /L_MAIN
L_f:


MOVE #234, #0[.IY]

CMP /65535, #1
BZ /L_6
ADD #6, /65533
MOVE #0[.IY], [.A] 
BR /L_7
L_6:
MOVE #0[.IY], #6[.IX] 
L_7:
NOP

MOVE #-1[.IX], #1[.IY] 

WRINT #1[.IY]
WRCHAR #10

MOVE #0, .R9
RET

L_MAIN:

MOVE #0, /65535
SUB .SP, #0
MOVE .A, .R4
MOVE .IX, .R5
MOVE .IY, .R6
MOVE /65534, .R7
MOVE .SP, .IX
ADD #7, .IX
MOVE .A, .IY
ADD #2, .IY
MOVE .A, .R8
MOVE .IX, /65534
PUSH .IX
PUSH #0
PUSH .R4
PUSH .R5
PUSH .R6
PUSH .R7
MOVE .R8, .SP


MOVE #77, #0[.IY]

CMP /65535, #0
BZ /L_12
ADD #6, /65534
MOVE #0[.IY], [.A] 
BR /L_13
L_12:
MOVE #0[.IY], #6[.IX] 
L_13:
NOP

CMP /65535, #0
BZ /L_14
ADD #6, /65534
MOVE [.A], #1[.IY]
BR /L_15
L_14:
MOVE #6[.IX], #1[.IY] 
L_15:
NOP

PUSH #1[.IY]

MOVE #1, /65535
SUB .SP, #1
MOVE .A, .R4
MOVE .IX, .R5
MOVE .IY, .R6
MOVE /65533, .R7
MOVE .SP, .IX
ADD #7, .IX
MOVE .A, .IY
ADD #2, .IY
MOVE .A, .R8
MOVE .IX, /65533
PUSH .IX
PUSH #0
PUSH .R4
PUSH .R5
PUSH .R6
PUSH .R7
MOVE .R8, .SP
CALL /L_f
ADD #6, .IX
MOVE .A, .SP
POP /65533
POP .IY
POP .IX
POP .SP
MOVE .R9, #1[.IX]


HALT

L_2:

ADD .PC, #7
MOVE .A, .SP
MOVE #60000, .IY

BR /L_L_GLOBAL
